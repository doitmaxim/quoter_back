(self.webpackChunk=self.webpackChunk||[]).push([[868],{8778:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var s=a(3645),r=a.n(s)()((function(e){return e[1]}));r.push([e.id,".quote-create-fieldset[data-v-fec9373e]{display:flex;flex-direction:column;margin-bottom:20px}.quote-create-textarea[data-v-fec9373e]{border:1px solid #212529;border-radius:5px;min-height:150px;resize:none}.quote-create-input[data-v-fec9373e]{border:1px solid #212529;border-radius:5px;padding:3px 10px}.quote-create-tag[data-v-fec9373e]{margin-right:.5rem}.quote-create-tag-label[data-v-fec9373e]{border:1px solid #212529;border-radius:15px;padding:3px 10px;transition:.3s ease-in-out}input[type=checkbox][data-v-fec9373e]{display:none}input[type=checkbox]:checked+.quote-create-tag-label[data-v-fec9373e]{background-color:#212529;color:#fff}.quote-create-buttons[data-v-fec9373e]{display:flex;justify-content:flex-end}.quote-create-button[data-v-fec9373e]{background-color:#212529;border:none;color:#fff;padding:10px 15px}",""]);const o=r},868:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var s=a(6767);const r={data:function(){return{quote:null,author:null,selectedTags:[],errors:[]}},computed:{tags:function(){return this.$store.getters["tags/tags"]},quotes:function(){return this.$store.getters["quotes/quotes"]}},methods:{hideModal:function(){this.$store.commit("modal/hideModal")},submitForm:function(e){var t=this;if(e.preventDefault(),this.errors=[],0===this.selectedTags.length&&this.errors.push("Хотя бы один тег должен быть выбран"),null==this.quote&&this.errors.push('Поле "Цитата" не может быть пустым'),null==this.author&&this.errors.push('Поле "Автор" не может быть пустым'),!(this.errors.length>0)){var a=document.querySelector("#quote-create-form"),r=new FormData(a),o=this.selectedTags.join(",");r.append("tags",o),(0,s.Z)().post("/quotes",r).then((function(e){t.$store.dispatch("quotes/loadQuotes",t.quotes.current_page),t.hideModal()}))}}},mounted:function(){this.$store.dispatch("tags/loadTags")}};var o=a(3379),c=a.n(o),i=a(8778),l={insert:"head",singleton:!1};c()(i.Z,l);i.Z.locals;const n=(0,a(1900).Z)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"quote-create-modal"},[a("form",{attrs:{action:"/",method:"post",id:"quote-create-form"},on:{submit:e.submitForm}},[a("fieldset",{staticClass:"quote-create-fieldset"},[a("label",{staticClass:"quote-create-label"},[e._v("Цитата")]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.quote,expression:"quote"}],staticClass:"quote-create-textarea",attrs:{name:"quote_text"},domProps:{value:e.quote},on:{input:function(t){t.target.composing||(e.quote=t.target.value)}}})]),e._v(" "),a("fieldset",{staticClass:"quote-create-fieldset"},[a("label",{staticClass:"quote-create-label"},[e._v("Автор")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.author,expression:"author"}],staticClass:"quote-create-input",attrs:{type:"text",name:"author"},domProps:{value:e.author},on:{input:function(t){t.target.composing||(e.author=t.target.value)}}})]),e._v(" "),a("fieldset",{staticClass:"quote-create-fieldset"},[e._m(0),e._v(" "),a("div",{staticClass:"quote-create-tags-list"},e._l(e.tags,(function(t){return a("span",{key:t.id,staticClass:"quote-create-tag"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedTags,expression:"selectedTags"}],staticClass:"quote-create-checkbox",attrs:{type:"checkbox",id:"tag"+t.id,disabled:e.selectedTags.length>2&&-1===e.selectedTags.indexOf(t.id)},domProps:{value:t.id,checked:Array.isArray(e.selectedTags)?e._i(e.selectedTags,t.id)>-1:e.selectedTags},on:{change:function(a){var s=e.selectedTags,r=a.target,o=!!r.checked;if(Array.isArray(s)){var c=t.id,i=e._i(s,c);r.checked?i<0&&(e.selectedTags=s.concat([c])):i>-1&&(e.selectedTags=s.slice(0,i).concat(s.slice(i+1)))}else e.selectedTags=o}}}),e._v(" "),a("label",{staticClass:"quote-create-tag-label",attrs:{for:"tag"+t.id}},[e._v(e._s(t.tag_name))])])})),0)]),e._v(" "),a("fieldset",{staticClass:"quote-create-errors"},e._l(e.errors,(function(t){return a("p",{key:t},[e._v(e._s(t))])})),0),e._v(" "),e._m(1)])])}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"quote-create-label"},[e._v("Теги "),a("small",[e._v("максимум 3")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("fieldset",{staticClass:"quote-create-buttons"},[a("button",{staticClass:"quote-create-button",attrs:{type:"submit"}},[e._v("Опубликовать")])])}],!1,null,"fec9373e",null).exports}}]);